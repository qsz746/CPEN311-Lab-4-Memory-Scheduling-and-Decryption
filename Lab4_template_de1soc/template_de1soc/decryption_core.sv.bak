module decryption_core (
  input  logic        clk,
  input  logic        reset_n,
  input  logic        start,
  input  logic [9:0]  input_key,
  output logic        ready,
  output logic        done
);

  // Internal memory interface signals
  logic [7:0]  mem_addr;
  logic [7:0]  mem_data_in;
  logic [7:0]  mem_data_out;
  logic        mem_wren;

  // Instantiate datapath
  rc4_datapath datapath_inst (
    .clk          (clk),
    .reset_n      (reset_n),
    .start        (start),
    .input_key    (input_key),
    .ready        (ready),
    .done         (done),
    // Memory interface
    .mem_addr     (mem_addr),
    .mem_data_in  (mem_data_in),
    .mem_data_out (mem_data_out),
    .mem_wren     (mem_wren)
  );

  // Instantiate S-memory (256-byte RAM)
  s_memory memory_inst (
    .clk      (clk),
    .address  (mem_addr),
    .data_in  (mem_data_out),
    .data_out (mem_data_in),
    .wren     (mem_wren)
  );

endmodule